<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>이재환의 포트폴리오</title>
  <link rel="stylesheet" href="css/page1/base.css">
  <link rel="stylesheet" href="css/page1/deco.css">
  <link rel="stylesheet" href="css/page1/footer.css">
  <link rel="stylesheet" href="css/page1/gradiant.css">
  <link rel="stylesheet" href="css/page1/header.css">
  <link rel="stylesheet" href="css/page1/main.css">

  <link rel="stylesheet" href="css/page2/section.css">

  <link rel="stylesheet" href="css/page3/section1.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.4/ScrollTrigger.min.js"></script>

</head>

<body>
  <div id="page">

    <header>
      <div>
        <div id="left-nav">
          <div><img src="svg/sMoon.svg" alt="달"></div>
          <div><a href="#">Jaehwan, Lee</a></div>
        </div>
        <div id="right-nav">
          <div><a href="#">Posts</a></div>
          <div><a href="#">Projects</a></div>
          <div><a href="#">About me</a></div>
        </div>
       </div> 
    </header>

    <main>
      <div id="main-wrap">
        <div>
          <div><h3>풀스택 개발자가 되고픈</h3></div>
          <div><h1>이재환의 포트폴리오</h1></div>
          <div id="atag">
            <a href="https://velog.io/@jaehwan0129"><img src="svg/velog.svg" alt="벨로그"></a>
            <a href="https://github.com/jaehwan02"><img src="svg/github.svg" alt="깃허브"></a>
            <a href="#"><img src="svg/instagram.svg" alt="인스타"></a>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <img src="svg/scroll.svg" alt="스크롤" id="scroll">
    </footer>

    <div id="image">
      <img src="svg/mMoon.svg" id="mMoon">
      <img src="svg/light.svg" id="light">
      <img src="svg/light2.svg" id="light2">
    </div>

    <div id="gradiant">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>

  </div>


  <div id="page2">
    <div>
      <section id="posts">
        <div class="title"><h2>Posts</h2></div>
        <div>
          <div class="block">
            <div ></div>
            <h3>Proxmox VM 생성하기</h3>
            <p>24시간 돌아가는 나만의 서버!</p>
          </div>

          <div class="block">
            <div ></div>
            <h3>가상화 OS Proxmox 설치하기</h3>
            <p>24시간 돌아가는 나만의 서버!</p>
          </div>

          <div class="block">
            <div ></div>
            <h3>우분투 CD 미러서버 구축하기   </h3>
            <p>미러서버를 구축하고 공식 미러로 등록해보자!</p>
          </div>
        </div>
        
        <div class="more-xy"><a href="#" alt="더보기버튼">
          <div class="more-box">
            <div class="more">more</div>
          </div>
        </a></div>
      </section>

    </div>
  </div>


  <div id="page3">
    <div>
      <section>
        <div class="title"><h2>Projects</h2></div>


        <div id="project-box">
          <div id="project-box2">
            <div id="nth1"><div id="project-logo"></div></div>
            
            <div id="nth2"><div>
              <h3>독서 동기부여 어플 단락</h3>
              <ul>
                <li>Github의 잔디요소로 지속적인 동기부여</li><br>
                <li>연속 출석 보너스</li><br>
                <li>스킨을 수집함으로서 재미 충족</li><br>
                <li>연속 독서 기록시 리워드 제공</li><br>
                <li>단체별 랭킹 서비스</li><br>
                <li>맞춤 책 추천 알고리즘</li><br>
                <li>책 별 카테고리 구분</li>
              </ul>
            </div></div>
          </div>
        </div>

        <div class="more-xy"><a href="#" alt="더보기버튼">
          <div class="more-box">
            <div class="more">more</div>
          </div>
        </a></div>
      </section>
    </div>

  </div>

</body>
</html>

<script>
  const moon = document.getElementById('mMoon');
  const light = document.getElementById('light');
  const headerMoon = document.querySelector("#left-nav > div:nth-child(1) > img");

  var startX;
  var startY;

  function adjustLight() {
    console.log("adjust");

    const headerMoonRect = headerMoon.getBoundingClientRect();
    const lightRect = light.getBoundingClientRect();
    const moonRect = moon.getBoundingClientRect();

    const lightWidth = light.offsetWidth;

    if (!light.style.top) {
      startX = headerMoonRect.left;
      startY = headerMoonRect.top - lightRect.height / 2 + headerMoonRect.height*3;

      light.style.top = `${startY}px`;
      light.style.left = `${startX}px`;
    }

    console.log(startX, startY);

    light.style.transform = "";

    const angle = Math.atan2((moonRect.top) - startY, (moonRect.left + moonRect.width*0.3) - startX) * 180 / Math.PI + 1.3;
    light.style.transform = `rotate(${angle}deg)`;

    const scale = Math.sqrt(Math.pow(moonRect.top - startY,2) + Math.pow(moonRect.left - startX + moonRect.width*0.3,2))/1023;
    light.style.transform += ` scale(${scale})`;
    console.log(scale);
  }

  window.addEventListener('resize', adjustLight);
  window.addEventListener('load', adjustLight);

  document.addEventListener("scroll", adjustLight)

  // gsap.to("#mMoon", { //움직일 대상의 selector
  //   scrollTrigger: {
  //       trigger: "#mMoon", // 스크롤을 감지할 대상의 selector
  //       start: "0% 20%", // trigger의 0% 지점과 viewport의 0% 지점이 만나면 애니메이션 시작
  //       end: "100% 100%", // trigger의 100% 지점과 viewport의 100% 지점이 만나면 애니메이션 종료
  //       scrub: 1, // 반대로 스크롤할때도 애니메이션을 반대로 적용할지 여부
  //       markers: true, // trigger의 시작, 끝 지점을 보여줌 (디버깅용)
  //   },
  //   onUpdate: () => {
  //     console.log("애니메이션이 업데이트 중입니다.");
  //     adjustLight();
  //   },

  //   ease: "power1.out", // 애니메이션의 속도 곡선
  //   top: "50%", // 애니메이션의 속성
  //   left: "50%", // 애니메이션의 속성
  //   // transform: "translate(-50%, -50%)", // 애니메이션의 속성
  // });
  gsap.to("#mMoon", { //움직일 대상의 selector
    scrollTrigger: {
        trigger: "#mMoon", // 스크롤을 감지할 대상의 selector
        start: "150% 0%", // trigger의 0% 지점과 viewport의 0% 지점이 만나면 애니메이션 시작
        end: "200% 100%", // trigger의 100% 지점과 viewport의 100% 지점이 만나면 애니메이션 종료
        scrub: 1, // 반대로 스크롤할때도 애니메이션을 반대로 적용할지 여부
        // markers: true, // trigger의 시작, 끝 지점을 보여줌 (디버깅용)
    },
    onUpdate: () => {
      console.log("애니메이션이 업데이트 중입니다.");
      adjustLight();
    },
    ease: "none", // 애니메이션의 속도 곡선
    top: headerMoon.getBoundingClientRect().top, // 애니메이션의 속성
    left: headerMoon.getBoundingClientRect().left, // 애니메이션의 속성
    width : headerMoon.getBoundingClientRect().width,
    // height: headerMoon.getBoundingClientRect().height,
    // position: "fixed",
    rotate: "26deg",
  });

  gsap.to("#light2", {
    scrollTrigger:{
        trigger: "#mMoon", // 스크롤을 감지할 대상의 selector
        start: "150% 0%", // trigger의 0% 지점과 viewport의 0% 지점이 만나면 애니메이션 시작
        end: "200% 100%", // trigger의 100% 지점과 viewport의 100% 지점이 만나면 애니메이션 종료
        scrub: 1, // 반대로 스크롤할때도 애니메이션을 반대로 적용할지 여부
        markers: true, // trigger의 시작, 끝 지점을 보여줌 (디버깅용)    
      },
      opacity: 1,
  })

</script>


<!-- lightRect.width:Math.sqrt(Math.pow(MoonRect.top - startY) + Math.pow(MoonRect.left - startX)) = 1:x

Math.sqrt(Math.pow(MoonRect.top - startX) + Math.pow(MoonRect.left - startY))/1022 = x

x = 배수 = scale 


moonRect.width*0.3



-->