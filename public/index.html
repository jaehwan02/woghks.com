<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>이재환의 포트폴리오</title>
  <link rel="stylesheet" href="css/page1/base.css">
  <link rel="stylesheet" href="css/page1/deco.css">
  <link rel="stylesheet" href="css/page1/footer.css">
  <link rel="stylesheet" href="css/page1/gradiant.css">
  <link rel="stylesheet" href="css/page1/header.css">
  <link rel="stylesheet" href="css/page1/main.css">

  <link rel="stylesheet" href="css/page2/section.css">

</head>

<body>
  <div id="page">

    <header>
      <div>
        <div id="left-nav">
          <div><img src="svg/sMoon.svg" alt="달"></div>
          <div><a href="#">Jaehwan, Lee</a></div>
        </div>
        <div id="right-nav">
          <div><a href="#">Posts</a></div>
          <div><a href="#">Projects</a></div>
          <div><a href="#">About me</a></div>
        </div>
       </div> 
    </header>

    <main>
      <div id="main-wrap">
        <div>
          <div><h3>풀스택 개발자가 되고픈</h3></div>
          <div><h1>이재환의 포트폴리오</h1></div>
          <div id="atag">
            <a href="https://velog.io/@jaehwan0129"><img src="svg/velog.svg" alt="벨로그"></a>
            <a href="https://github.com/jaehwan02"><img src="svg/github.svg" alt="깃허브"></a>
            <a href="#"><img src="svg/instagram.svg" alt="인스타"></a>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <img src="svg/scroll.svg" alt="스크롤" id="scroll">
    </footer>

    <div id="image">
      <img src="svg/mMoon.svg" id="mMoon">
      <img src="svg/light.svg" id="light">
    </div>

    <div id="gradiant">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>

  </div>


  <div id="page2">
    <div>
      <section id="posts">
        <div class="title"><h2>Posts</h2></div>

        <div class="block">
          <div ></div>
          <h3>Proxmox VM 생성하기</h3>
          <p>24시간 돌아가는 나만의 서버!</p>
        </div>

        <div class="block">
          <div ></div>
          <h3>가상화 OS Proxmox 설치하기</h3>
          <p>24시간 돌아가는 나만의 서버!</p>
        </div>

        <div class="block">
          <div ></div>
          <h3>우분투 CD 미러서버 구축하기   </h3>
          <p>미러서버를 구축하고 공식 미러로 등록해보자!</p>
        </div>

        <div class="more">more</div>
      </section>
    </div>

  </div>

</body>
</html>

<script>
  var startX
  var startY

  function adjustLight() {
    console.log("adjust")
    const moon = document.getElementById('mMoon');
    const light = document.getElementById('light');
    const headerMoon = document.querySelector("#left-nav > div:nth-child(1) > img")
    
    const headreMoonRect = headerMoon.getBoundingClientRect();
    const lightRect = light.getBoundingClientRect();
    const moonRect = moon.getBoundingClientRect();
    
    const lightWidth = light.offsetWidth;
    
    if(!light.style.top){
    startX = headreMoonRect.left + headreMoonRect.width/2;
    startY = headreMoonRect.top - lightRect.height/2 + headreMoonRect.height*1.2;

      light.style.top = `${startY}px`;
      light.style.left = `${startX}px`;
    }
    
    console.log(startX, startY);
    
    light.style.transform = "";
    
    const angle = Math.atan2((moonRect.top) - startY,  (moonRect.left+moonRect.width/2) - startX) * 180 / Math.PI;
    light.style.transform = `rotate(${angle}deg)`;
  }

  window.addEventListener('resize', adjustLight);
  window.addEventListener('load', adjustLight);
</script>